{"version":3,"file":"fetch.js","names":[],"sources":["../../src/clients/fetch.ts"],"sourcesContent":["/**\n * RequestCredentials\n */\nexport type RequestCredentials = 'omit' | 'same-origin' | 'include'\n\n/**\n * Subset of FetchRequestConfig\n */\nexport type RequestConfig<TData = unknown> = {\n  baseURL?: string\n  url?: string\n  method?: 'GET' | 'PUT' | 'PATCH' | 'POST' | 'DELETE' | 'OPTIONS' | 'HEAD'\n  params?: unknown\n  data?: TData | FormData\n  responseType?: 'arraybuffer' | 'blob' | 'document' | 'json' | 'text' | 'stream'\n  signal?: AbortSignal\n  headers?: [string, string][] | Record<string, string>\n  credentials?: RequestCredentials\n}\n\n/**\n * Subset of FetchResponse\n */\nexport type ResponseConfig<TData = unknown> = {\n  data: TData\n  status: number\n  statusText: string\n  headers: Headers\n}\n\nlet _config: Partial<RequestConfig> = {}\n\nexport const getConfig = () => _config\n\nexport const setConfig = (config: Partial<RequestConfig>) => {\n  _config = config\n  return getConfig()\n}\n\nexport type ResponseErrorConfig<TError = unknown> = TError\n\nexport const client = async <TResponseData, _TError = unknown, RequestData = unknown>(\n  paramsConfig: RequestConfig<RequestData>,\n): Promise<ResponseConfig<TResponseData>> => {\n  const normalizedParams = new URLSearchParams()\n\n  const globalConfig = getConfig()\n  const config = {\n    ...globalConfig,\n    ...paramsConfig,\n    headers: {\n      ...(Array.isArray(globalConfig.headers) ? Object.fromEntries(globalConfig.headers) : globalConfig.headers),\n      ...(Array.isArray(paramsConfig.headers) ? Object.fromEntries(paramsConfig.headers) : paramsConfig.headers),\n    },\n  }\n\n  Object.entries(config.params || {}).forEach(([key, value]) => {\n    if (value !== undefined) {\n      normalizedParams.append(key, value === null ? 'null' : value.toString())\n    }\n  })\n\n  let targetUrl = [config.baseURL, config.url].filter(Boolean).join('')\n\n  if (config.params) {\n    targetUrl += `?${normalizedParams}`\n  }\n\n  const response = await fetch(targetUrl, {\n    credentials: config.credentials || 'same-origin',\n    method: config.method?.toUpperCase(),\n    body: config.data instanceof FormData ? config.data : JSON.stringify(config.data),\n    signal: config.signal,\n    headers: config.headers,\n  })\n\n  const data = [204, 205, 304].includes(response.status) || !response.body ? {} : await response.json()\n\n  return {\n    data: data as TResponseData,\n    status: response.status,\n    statusText: response.statusText,\n    headers: response.headers as Headers,\n  }\n}\n\nclient.getConfig = getConfig\nclient.setConfig = setConfig\n\nexport default client\n"],"mappings":";;;AA8BA,IAAI,UAAkC,EAAE;AAExC,MAAa,kBAAkB;AAE/B,MAAa,aAAa,WAAmC;AAC3D,WAAU;AACV,QAAO,WAAW;;AAKpB,MAAa,SAAS,OACpB,iBAC2C;CAC3C,MAAM,mBAAmB,IAAI,iBAAiB;CAE9C,MAAM,eAAe,WAAW;CAChC,MAAM,SAAS;EACb,GAAG;EACH,GAAG;EACH,SAAS;GACP,GAAI,MAAM,QAAQ,aAAa,QAAQ,GAAG,OAAO,YAAY,aAAa,QAAQ,GAAG,aAAa;GAClG,GAAI,MAAM,QAAQ,aAAa,QAAQ,GAAG,OAAO,YAAY,aAAa,QAAQ,GAAG,aAAa;GACnG;EACF;AAED,QAAO,QAAQ,OAAO,UAAU,EAAE,CAAC,CAAC,SAAS,CAAC,KAAK,WAAW;AAC5D,MAAI,UAAU,OACZ,kBAAiB,OAAO,KAAK,UAAU,OAAO,SAAS,MAAM,UAAU,CAAC;GAE1E;CAEF,IAAI,YAAY,CAAC,OAAO,SAAS,OAAO,IAAI,CAAC,OAAO,QAAQ,CAAC,KAAK,GAAG;AAErE,KAAI,OAAO,OACT,cAAa,IAAI;CAGnB,MAAM,WAAW,MAAM,MAAM,WAAW;EACtC,aAAa,OAAO,eAAe;EACnC,QAAQ,OAAO,QAAQ,aAAa;EACpC,MAAM,OAAO,gBAAgB,WAAW,OAAO,OAAO,KAAK,UAAU,OAAO,KAAK;EACjF,QAAQ,OAAO;EACf,SAAS,OAAO;EACjB,CAAC;AAIF,QAAO;EACL,MAHW;GAAC;GAAK;GAAK;GAAI,CAAC,SAAS,SAAS,OAAO,IAAI,CAAC,SAAS,OAAO,EAAE,GAAG,MAAM,SAAS,MAAM;EAInG,QAAQ,SAAS;EACjB,YAAY,SAAS;EACrB,SAAS,SAAS;EACnB;;AAGH,OAAO,YAAY;AACnB,OAAO,YAAY;AAEnB,oBAAe"}