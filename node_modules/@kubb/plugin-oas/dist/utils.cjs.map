{"version":3,"file":"utils.cjs","names":["URLPath","transformers"],"sources":["../src/utils/getComments.ts","../src/utils/getParams.ts","../src/utils/getSchemas.ts"],"sourcesContent":["import transformers from '@kubb/core/transformers'\nimport { URLPath } from '@kubb/core/utils'\n\nimport type { Operation } from '@kubb/oas'\n\nexport function getComments(operation: Operation): string[] {\n  return [\n    operation.getDescription() && `@description ${operation.getDescription()}`,\n    operation.getSummary() && `@summary ${operation.getSummary()}`,\n    operation.path && `{@link ${new URLPath(operation.path).URL}}`,\n    operation.isDeprecated() && '@deprecated',\n  ]\n    .filter(Boolean)\n    .map((text) => transformers.trim(text))\n    .filter(Boolean)\n}\n","import { camelCase, isValidVarName } from '@kubb/core/transformers'\nimport type { FunctionParamsAST } from '@kubb/core/utils'\nimport type { OasTypes } from '@kubb/oas'\nimport type { Params } from '@kubb/react-fabric/types'\nimport type { OperationSchema } from '../types.ts'\n/**\n *\n * @deprecated\n * TODO move to operationManager hook\n */\nexport function getASTParams(\n  operationSchema: OperationSchema | undefined,\n  {\n    typed = false,\n    override,\n  }: {\n    typed?: boolean\n    override?: (data: FunctionParamsAST) => FunctionParamsAST\n  } = {},\n): FunctionParamsAST[] {\n  if (!operationSchema || !operationSchema.schema.properties || !operationSchema.name) {\n    return []\n  }\n\n  const requiredFields = Array.isArray(operationSchema.schema.required) ? operationSchema.schema.required : []\n\n  return Object.entries(operationSchema.schema.properties).map(([name]: [string, OasTypes.SchemaObject]) => {\n    const data: FunctionParamsAST = {\n      name,\n      enabled: !!name,\n      required: requiredFields.includes(name),\n      type: typed ? `${operationSchema.name}[\"${name}\"]` : undefined,\n    }\n\n    return override ? override(data) : data\n  })\n}\n\nexport function getPathParams(\n  operationSchema: OperationSchema | undefined,\n  options: {\n    typed?: boolean\n    casing?: 'camelcase'\n    override?: (data: FunctionParamsAST) => FunctionParamsAST\n  } = {},\n) {\n  return getASTParams(operationSchema, options).reduce((acc, curr) => {\n    if (curr.name && curr.enabled) {\n      let name = isValidVarName(curr.name) ? curr.name : camelCase(curr.name)\n\n      if (options.casing === 'camelcase') {\n        name = camelCase(name)\n      }\n\n      acc[name] = {\n        default: curr.default,\n        type: curr.type,\n        optional: !curr.required,\n      }\n    }\n\n    return acc\n  }, {} as Params)\n}\n","import type { contentType, Oas, OasTypes } from '@kubb/oas'\n\nexport type GetSchemasResult = {\n  schemas: Record<string, OasTypes.SchemaObject>\n  /**\n   * Mapping from original component name to resolved name after collision handling\n   * e.g., { 'Order': 'OrderSchema', 'variant': 'variant2' }\n   */\n  nameMapping: Map<string, string>\n}\n\ntype Mode = 'schemas' | 'responses' | 'requestBodies'\n\ntype GetSchemasProps = {\n  oas: Oas\n  contentType?: contentType\n  includes?: Mode[]\n  /**\n   * Whether to resolve name collisions with suffixes.\n   * If not provided, uses oas.options.collisionDetection\n   * @default false (from oas.options or fallback)\n   */\n  collisionDetection?: boolean\n}\n\n/**\n * Collect schemas from OpenAPI components (schemas, responses, requestBodies)\n * and return them in dependency order along with name mapping for collision resolution.\n *\n * This function is a wrapper around the oas.getSchemas() method for backward compatibility.\n * New code should use oas.getSchemas() directly.\n *\n * @deprecated Use oas.getSchemas() instead\n */\nexport function getSchemas({ oas, contentType, includes = ['schemas', 'requestBodies', 'responses'], collisionDetection }: GetSchemasProps): GetSchemasResult {\n  return oas.getSchemas({\n    contentType,\n    includes,\n    collisionDetection,\n  })\n}\n"],"mappings":";;;;;;;;;AAKA,SAAgB,YAAY,WAAgC;AAC1D,QAAO;EACL,UAAU,gBAAgB,IAAI,gBAAgB,UAAU,gBAAgB;EACxE,UAAU,YAAY,IAAI,YAAY,UAAU,YAAY;EAC5D,UAAU,QAAQ,UAAU,IAAIA,yBAAQ,UAAU,KAAK,CAAC,IAAI;EAC5D,UAAU,cAAc,IAAI;EAC7B,CACE,OAAO,QAAQ,CACf,KAAK,SAASC,gCAAa,KAAK,KAAK,CAAC,CACtC,OAAO,QAAQ;;;;;;;;;;ACJpB,SAAgB,aACd,iBACA,EACE,QAAQ,OACR,aAIE,EAAE,EACe;AACrB,KAAI,CAAC,mBAAmB,CAAC,gBAAgB,OAAO,cAAc,CAAC,gBAAgB,KAC7E,QAAO,EAAE;CAGX,MAAM,iBAAiB,MAAM,QAAQ,gBAAgB,OAAO,SAAS,GAAG,gBAAgB,OAAO,WAAW,EAAE;AAE5G,QAAO,OAAO,QAAQ,gBAAgB,OAAO,WAAW,CAAC,KAAK,CAAC,UAA2C;EACxG,MAAM,OAA0B;GAC9B;GACA,SAAS,CAAC,CAAC;GACX,UAAU,eAAe,SAAS,KAAK;GACvC,MAAM,QAAQ,GAAG,gBAAgB,KAAK,IAAI,KAAK,MAAM;GACtD;AAED,SAAO,WAAW,SAAS,KAAK,GAAG;GACnC;;AAGJ,SAAgB,cACd,iBACA,UAII,EAAE,EACN;AACA,QAAO,aAAa,iBAAiB,QAAQ,CAAC,QAAQ,KAAK,SAAS;AAClE,MAAI,KAAK,QAAQ,KAAK,SAAS;GAC7B,IAAI,mDAAsB,KAAK,KAAK,GAAG,KAAK,8CAAiB,KAAK,KAAK;AAEvE,OAAI,QAAQ,WAAW,YACrB,+CAAiB,KAAK;AAGxB,OAAI,QAAQ;IACV,SAAS,KAAK;IACd,MAAM,KAAK;IACX,UAAU,CAAC,KAAK;IACjB;;AAGH,SAAO;IACN,EAAE,CAAW;;;;;;;;;;;;;;AC5BlB,SAAgB,WAAW,EAAE,KAAK,aAAa,WAAW;CAAC;CAAW;CAAiB;CAAY,EAAE,sBAAyD;AAC5J,QAAO,IAAI,WAAW;EACpB;EACA;EACA;EACD,CAAC"}